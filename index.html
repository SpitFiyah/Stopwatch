<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Stopwatch</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Left Side: Controls & Features -->
        <section class="controls">
            <div class="main-controls">
                <button id="startPauseBtn" class="btn primary">Start</button>
                <button id="resetBtn" class="btn">Reset</button>
                <button id="lapBtn" class="btn">Lap</button>
            </div>
            <div class="extra-controls">
                <div class="control-group">
                    <button id="exportBtn" class="btn-small">Export Laps</button>
                    <button id="themeToggle" class="theme-toggle-btn" aria-label="Toggle theme">
                        <span class="sun-icon">‚òÄÔ∏è</span>
                        <span class="moon-icon">üåô</span>
                    </button>
                </div>
                <div class="control-group">
                    <div class="sound-toggle">
                        <span>Sound</span>
                        <label class="switch">
                            <input type="checkbox" id="soundToggle">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <button id="fullscreenBtn" class="btn-small">Fullscreen</button>
                </div>
            </div>
            <div class="help-section">
                <h3>Keyboard Shortcuts</h3>
                <div class="shortcut-item">
                    <kbd>Space</kbd>
                    <span>Start/Pause</span>
                </div>
                <div class="shortcut-item">
                    <kbd>L</kbd>
                    <span>Record Lap</span>
                </div>
                <div class="shortcut-item">
                    <kbd>R</kbd>
                    <span>Reset Timer</span>
                </div>
                <div class="shortcut-item">
                    <kbd>G</kbd>
                    <span>Open Graph (stops timer)</span>
                </div>
                <div class="shortcut-item">
                    <kbd>F</kbd>
                    <span>Toggle Fullscreen</span>
                </div>
                <div class="shortcut-item">
                    <kbd>E</kbd>
                    <span>Export Data</span>
                </div>
                <div class="shortcut-item">
                    <kbd>Esc</kbd>
                    <span>Close Graph/Exit Fullscreen</span>
                </div>
            </div>
        </section>

        <!-- Center: Main Display -->
        <section class="main-display">
            <div class="stopwatch" id="display">00:00:00.000</div>
            <div class="visualization-container">
                <div class="visualization-header">
                    <h3>Lap Times Visualization</h3>
                    <div class="visualization-controls">
                        <button id="expandGraphBtn" class="btn-small"><span class="icon">‚õ∂</span> Expand</button>
                        <button id="exportGraphBtn" class="btn-small"><span class="icon">üì•</span> Export</button>
                    </div>
                </div>
                <div class="lap-visualization" id="lapVisualization">
                    <!-- Visual representation of lap times will be rendered here -->
                    <div class="visualization-placeholder">Record laps to see visualization</div>
                </div>
                <div class="lap-axis" id="lapAxis"></div>
            </div>
            <div id="graphModal" class="graph-modal">
                <div class="graph-modal-content">
                    <div class="graph-modal-header">
                        <button id="closeGraphBtn" class="btn-small">Close</button>
                    </div>
                    <div class="graph-modal-body">
                        <canvas id="lapCanvas" width="800" height="400"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Right Side: Lap History -->
        <section class="lap-history">
            <div class="lap-header">
                <h2>Lap History</h2>
                <input type="text" id="lapSearch" placeholder="Search laps...">
            </div>
            <div class="lap-list" id="lapList">
                <!-- Lap entries will be added here dynamically -->
            </div>
        </section>
    </div>

    <!-- Footer: Stats Section -->
    <footer class="stats-section">
        <div class="stat-item">
            <span class="stat-label">Average Lap</span>
            <span class="stat-value" id="avgLap">--:--:--</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Fastest Lap</span>
            <span class="stat-value" id="fastestLap">--:--:--</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">Total Elapsed</span>
            <span class="stat-value" id="totalElapsed">00:00:00.000</span>
        </div>
        <button id="clearLapsBtn" class="btn">Clear All Laps</button>
    </footer>

    <!-- Custom Confirmation Modal -->
    <div id="confirmationModal" class="modal">
        <div class="modal-content">
            <h3 id="modal-title">Confirm Action</h3>
            <p id="modal-message">Are you sure you want to proceed?</p>
            <div class="modal-buttons">
                <button id="modal-cancel" class="btn">Cancel</button>
                <button id="modal-confirm" class="btn primary">Confirm</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>